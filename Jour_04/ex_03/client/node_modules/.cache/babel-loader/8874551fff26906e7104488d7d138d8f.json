{"ast":null,"code":"var _jsxFileName = \"/home/audrey/Piscine_MERN/Jour_04/ex_03/client/src/App.js\";\nimport React, { Component } from 'react';\nimport logo from \"./logo.svg\";\nimport './App.css';\nimport axios from 'axios';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport { BrowserRouter as Router, Switch, Route, Link, useRouteMatch, useParams } from \"react-router-dom\";\nimport Cookies from 'universal-cookie';\nconst cookies = new Cookies();\n\nclass App extends Component {\n  constructor() {\n    super();\n    this.state = {\n      produits: [],\n      user: [],\n      billets: []\n    };\n  }\n\n  componentDidMount() {\n    axios.get(\"http://localhost:5000/express_backend\").then(data => {\n      this.setState({\n        produits: data.data.produits\n      });\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"App\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 36,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(Router, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 37,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"nav\", {\n      class: \"navbar navbar-expand-lg navbar-light bg-light\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 38,\n        columnNumber: 9\n      }\n    }, \" \", /*#__PURE__*/React.createElement(\"div\", {\n      class: \"navbar-nav\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 38,\n        columnNumber: 69\n      }\n    }, /*#__PURE__*/React.createElement(Link, {\n      class: \"nav-item nav-link\",\n      to: \"/\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 39,\n        columnNumber: 13\n      }\n    }, \"Home\"), /*#__PURE__*/React.createElement(Link, {\n      class: \"nav-item nav-link\",\n      to: \"/register\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 40,\n        columnNumber: 13\n      }\n    }, \"Register\"), /*#__PURE__*/React.createElement(Link, {\n      class: \"nav-item nav-link\",\n      to: \"/login\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 41,\n        columnNumber: 13\n      }\n    }, \"Login\"), /*#__PURE__*/React.createElement(Link, {\n      class: \"nav-item nav-link\",\n      to: \"/logout\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 42,\n        columnNumber: 13\n      }\n    }, \"Logout\"))), /*#__PURE__*/React.createElement(Switch, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Route, {\n      path: \"/register\",\n      component: Register,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(Route, {\n      path: \"/logout\",\n      component: Logout,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(Route, {\n      path: \"/Login\",\n      component: Login,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(Route, {\n      path: \"/dashboard\",\n      component: Dashboard,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(Route, {\n      path: \"/register\",\n      component: Register,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(Route, {\n      path: \"/all/:handle\",\n      component: SeeAll,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(Route, {\n      path: \"/:handle\",\n      component: Dashboard,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 11\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 9\n      }\n    }));\n  }\n\n}\n\nclass Register extends React.Component {\n  constructor(...args) {\n    super(...args);\n\n    this.handleRegister = e => {\n      e.preventDefault();\n      var data = {\n        login: this.refs.usernameItem.value,\n        email: this.refs.emailItem.value,\n        password: this.refs.passwordItem.value,\n        passwordconf: this.refs.passwordconfItem.value\n      };\n      var url = 'http://localhost:3000/register';\n      axios.post(url, data).then(response => console.log(response)).catch(e => console.log(e));\n    };\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"form\", {\n      onSubmit: this.handleRegister,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      for: \"register[login]\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 13\n      }\n    }, \"Login\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      ref: \"usernameItem\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 55\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 95\n      }\n    }), /*#__PURE__*/React.createElement(\"label\", {\n      for: \"register[email]\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 13\n      }\n    }, \"email\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"email\",\n      ref: \"emailItem\",\n      name: \"register[email]\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 55\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 116\n      }\n    }), /*#__PURE__*/React.createElement(\"label\", {\n      for: \"register[password]\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 13\n      }\n    }, \"Password\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"password\",\n      ref: \"passwordItem\",\n      name: \"register[password]\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 61\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 130\n      }\n    }), /*#__PURE__*/React.createElement(\"label\", {\n      for: \"register[passwordconfirm]\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 13\n      }\n    }, \"Password Confirm\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"password\",\n      ref: \"passwordconfItem\",\n      name: \"register[passwordconfirm]\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 76\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 156\n      }\n    }), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"submit\",\n      value: \"Submit\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 13\n      }\n    }));\n  }\n\n}\n\nclass Login extends React.Component {\n  constructor(...args) {\n    super(...args);\n\n    this.handleLogin = e => {\n      e.preventDefault();\n      var data = {\n        email: this.refs.emailItem.value,\n        password: this.refs.passwordItem.value\n      };\n      var url = 'http://localhost:3000/login';\n      axios.post(url, data).then(function (response) {\n        console.log(response);\n\n        if (response.data.good == true) {\n          cookies.set('id', response.data.data.id, {\n            path: '/'\n          });\n          cookies.set('type', response.data.data.type, {\n            path: '/'\n          });\n          cookies.set('login', response.data.data.login, {\n            path: '/'\n          });\n          window.location = \"/\" + response.data.data.login;\n        } else {\n          alert(\"Impossible de vous connecter, veillez réessayer\");\n        }\n      }).catch(e => console.log(e));\n    };\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"form\", {\n      onSubmit: this.handleLogin,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 2\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      for: \"login[email]\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 13\n      }\n    }, \"email\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"email\",\n      ref: \"emailItem\",\n      name: \"login[email]\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 52\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 109\n      }\n    }), /*#__PURE__*/React.createElement(\"label\", {\n      for: \"login[password]\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 13\n      }\n    }, \"Password\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"password\",\n      ref: \"passwordItem\",\n      name: \"login[password]\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 58\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 124\n      }\n    }), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"submit\",\n      value: \"Submit\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 13\n      }\n    }));\n  }\n\n}\n\nclass Dashboard extends React.Component {\n  render() {\n    // console.log(this.props.match.params.handle);\n    // console.log(cookies.get('type'));\n    // console.log(cookies.get('login'));\n    console.log(this.state);\n\n    if (cookies.get('id')) {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        class: \"container\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 129,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"h1\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 130,\n          columnNumber: 11\n        }\n      }, \"Bienvenue \", cookies.get('login'), \"!\"));\n    } else {\n      window.location = \"/login\";\n    }\n  }\n\n}\n\nclass Logout extends React.Component {\n  render() {\n    cookies.remove('id');\n    cookies.remove('type');\n    cookies.remove('login');\n    return window.location = \"/login\";\n  }\n\n}\n\nclass Billet extends React.Component {\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      class: \"container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 7\n      }\n    }, \"      \", /*#__PURE__*/React.createElement(\"div\", {\n      class: \"card\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 36\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      class: \"card-header\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 9\n      }\n    }, this.props.titre), /*#__PURE__*/React.createElement(\"div\", {\n      class: \"card-body\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"h6\", {\n      class: \"card-subtitle mb-2 text-muted\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 11\n      }\n    }, this.props.date), /*#__PURE__*/React.createElement(\"div\", {\n      class: \"card-text\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 10\n      }\n    }, this.props.contenu))));\n  }\n\n}\n\nclass SeeAll extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n      user: [],\n      billets: []\n    };\n  }\n\n  componentDidMount() {\n    axios.get(\"http://localhost:5000/all/\" + this.props.match.params.handle).then(data => {\n      this.setState({\n        billets: data.data.billets\n      });\n      console.log(this.state);\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 7\n      }\n    }, \"\\\"ici on voit les billets de \\\" + \", this.props.match.params.handle, \" + \\\" ewewew\\\"\", this.state.billets.map(e => {\n      return /*#__PURE__*/React.createElement(Billet, {\n        titre: e.titre,\n        contenu: e.contenu,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 191,\n          columnNumber: 13\n        }\n      });\n    }));\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["/home/audrey/Piscine_MERN/Jour_04/ex_03/client/src/App.js"],"names":["React","Component","axios","BrowserRouter","Router","Switch","Route","Link","useRouteMatch","useParams","Cookies","cookies","App","constructor","state","produits","user","billets","componentDidMount","get","then","data","setState","render","Register","Logout","Login","Dashboard","SeeAll","handleRegister","e","preventDefault","login","refs","usernameItem","value","email","emailItem","password","passwordItem","passwordconf","passwordconfItem","url","post","response","console","log","catch","handleLogin","good","set","id","path","type","window","location","alert","remove","Billet","props","titre","date","contenu","match","params","handle","map"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport logo from './logo.svg';\nimport './App.css';\nimport axios from 'axios';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport {\n  BrowserRouter as Router,\n  Switch,\n  Route,\n  Link,\n  useRouteMatch,\n  useParams\n} from \"react-router-dom\";\nimport Cookies from 'universal-cookie';\nconst cookies = new Cookies();\n\nclass App extends Component {\n  constructor() {\n    super();\n    this.state = {\n      produits: [],\n      user: [],\n      billets: [],\n\n    }\n  }\n\n  componentDidMount() {\n    axios.get(\"http://localhost:5000/express_backend\").then((data) => {\n      this.setState({ produits: data.data.produits });\n    })\n  } \n\n  render() {\n    return (\n      <div className=\"App\">\n        <Router>\n        <nav class=\"navbar navbar-expand-lg navbar-light bg-light\"> <div class=\"navbar-nav\"> \n            <Link class=\"nav-item nav-link\" to=\"/\">Home</Link>\n            <Link class=\"nav-item nav-link\" to=\"/register\">Register</Link>\n            <Link class=\"nav-item nav-link\" to=\"/login\">Login</Link>\n            <Link class=\"nav-item nav-link\" to=\"/logout\">Logout</Link>\n\n          </div>\n   </nav>\n        <Switch>\n          <Route path=\"/register\" component={Register} />\n          <Route path=\"/logout\" component={Logout} />\n          <Route path=\"/Login\" component={Login} />\n          <Route path=\"/dashboard\" component={Dashboard}/>\n          <Route path=\"/register\" component={Register} />\n          <Route path='/all/:handle' component={SeeAll} />\n          <Route path='/:handle' component={Dashboard} />\n        </Switch>\n        </Router>\n        <div></div>\n      </div>\n    );\n  }\n}\n\nclass Register extends React.Component {\n  handleRegister = (e) => {\n     e.preventDefault();\n      var data = {\n          login: this.refs.usernameItem.value,\n          email: this.refs.emailItem.value,\n          password: this.refs.passwordItem.value,\n          passwordconf: this.refs.passwordconfItem.value,\n              }\n       var url = 'http://localhost:3000/register';\n       axios.post(url,data)\n        .then(response=>console.log(response))\n        .catch(e=>console.log(e))\n  }\n\n  render() {\n    return (\n      <form onSubmit={this.handleRegister}>\n            <label for=\"register[login]\">Login</label><input type=\"text\"  ref=\"usernameItem\"/><br/>\n            <label for=\"register[email]\">email</label><input type=\"email\"  ref=\"emailItem\" name=\"register[email]\"/><br/>\n            <label for=\"register[password]\">Password</label><input type=\"password\" ref=\"passwordItem\" name=\"register[password]\"/><br/>\n            <label for=\"register[passwordconfirm]\">Password Confirm</label><input type=\"password\" ref=\"passwordconfItem\" name=\"register[passwordconfirm]\"/><br/>\n            <input type=\"submit\" value=\"Submit\"/></form>)\n  }\n}\n\nclass Login extends React.Component {\n  handleLogin = (e) => {\n     e.preventDefault();\n      var data = {\n          email: this.refs.emailItem.value,\n          password: this.refs.passwordItem.value,\n              }\n       var url = 'http://localhost:3000/login';\n       axios.post(url,data)\n         .then(function (response) {\n           console.log(response);\n           if (response.data.good == true) {\n             cookies.set('id', response.data.data.id, { path: '/' });\n             cookies.set('type', response.data.data.type, { path: '/' });\n             cookies.set('login', response.data.data.login , { path: '/' });\n             window.location = \"/\"+response.data.data.login;\n           }\n           else {\n             alert (\"Impossible de vous connecter, veillez réessayer\")\n           }\n         })\n         .catch(e => console.log(e))\n  }\n\n  render() {\n    return (\n <form onSubmit={this.handleLogin}>\n            <label for=\"login[email]\">email</label><input type=\"email\" ref=\"emailItem\" name=\"login[email]\"/><br/>\n            <label for=\"login[password]\">Password</label><input type=\"password\" ref=\"passwordItem\" name=\"login[password]\"/><br/>\n            <input type=\"submit\" value=\"Submit\"/></form>)\n  }\n}\n\nclass Dashboard extends React.Component {\n  render() {\n    // console.log(this.props.match.params.handle);\n    // console.log(cookies.get('type'));\n              // console.log(cookies.get('login'));\n    console.log( this.state );\n    if (cookies.get('id')) {\n      return (\n        <div class=\"container\">\n          <h1>Bienvenue {cookies.get('login')}!</h1>\n\n          \n        </div>\n      )\n    }\n      else {\n        window.location = \"/login\"\n    }\n  }\n}\n\nclass Logout extends React.Component {\n\n  render() {\n    cookies.remove('id');\n    cookies.remove('type');\n    cookies.remove('login');\n      return (  window.location = \"/login\" )\n    \n  }\n}\n\n\nclass Billet extends React.Component {\n  render() {\n    return (\n      <div class=\"container\">      <div class=\"card\">\n        <div class=\"card-header\">{this.props.titre}</div>\n        <div class=\"card-body\">       \n          <h6 class=\"card-subtitle mb-2 text-muted\">{this.props.date}</h6>\n         <div class=\"card-text\">{this.props.contenu}</div>   \n        </div></div>\n</div>\n  )\n  }\n}\n\nclass SeeAll extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n      user: [],\n      billets: [],\n\n    }\n  }\n    componentDidMount() {\n    axios.get(\"http://localhost:5000/all/\"+this.props.match.params.handle).then((data) => {\n      this.setState({ billets: data.data.billets });\n      console.log(this.state)\n    })\n  } \n  \n  render() {     \n\t\treturn(\n      <div>\n        \"ici on voit les billets de \" + {this.props.match.params.handle} + \" ewewew\"\n        \n\t\t\t{this.state.billets.map((e) => {\n          return (\n            <Billet titre={e.titre} contenu={e.contenu}/>\n         )\n       })}\n\t\t\t</div>\n\t\t)\n\t}\n    \n  \n}\nexport default App; "]},"metadata":{},"sourceType":"module"}